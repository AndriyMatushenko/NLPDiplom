# Інструкція з розгортання у виробничому середовищі (Production)

Цей документ описує процес розгортання проєкту "Юридичний асистент" на сервері.

#### 1. Вимоги до середовища

**Апаратне забезпечення**
* **Архітектура:** x86-64
* **CPU:** 4+ ядер
* **RAM:** Мінімум 8 GB (для стабільної роботи LLM), **16 GB рекомендовано**.
* **Диск:** Мінімум 20 GB SSD (для ОС, Ollama, моделей та оброблених даних).

**Програмне забезпечення**
* **ОС:** Ubuntu Server 22.04 LTS (рекомендовано) або інший сучасний дистрибутив Linux.
* **Python:** 3.10 або вище.
* **Ollama:** Встановлений та налаштований як сервіс.
* **Git:** Для отримання коду з репозиторію.

#### 2. Налаштування сервера

1.  **Створіть окремого користувача** для запуску додатку:
    ```bash
    sudo adduser legal-assistant
    sudo usermod -aG sudo legal-assistant
    su - legal-assistant
    ```

2.  **Встановіть Ollama**, дотримуючись офіційної інструкції.
    ```bash
    curl -fsSL [https://ollama.com/install.sh](https://ollama.com/install.sh) | sh
    ```

3.  **Завантажте мовну модель:**
    ```bash
    ollama pull mistral
    ```

#### 3. Розгортання коду

1.  **Клонуйте репозиторій** та перейдіть у теку проєкту.
2.  **Налаштуйте віртуальне середовище** та встановіть залежності з `requirements.txt`.
3.  **Згенеруйте файл `documents.pkl`**, виконавши `python app.py` один раз і зупинивши його після ініціалізації.

#### 4. Налаштування мережі

* Дозвольте вхідний трафік на порт **7860**:
    ```bash
    sudo ufw allow 7860/tcp
    ```

#### 5. Налаштування сервісу (Systemd)

1.  Створіть файл `/etc/systemd/system/legal-assistant.service`.
2.  Додайте конфігурацію, вказавши правильні шляхи до вашого проєкту.
3.  Активуйте та запустіть сервіс:
    ```bash
    sudo systemctl daemon-reload
    sudo systemctl enable legal-assistant.service
    sudo systemctl start legal-assistant.service
    ```

#### 6. Перевірка працездатності

1.  Перевірте статус: `sudo systemctl status legal-assistant.service`.
2.  Перегляньте логи: `sudo journalctl -u legal-assistant.service -f`.
3.  Відкрийте у браузері `http://<IP-адреса_сервера>:7860`.
